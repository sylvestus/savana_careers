"use strict";(self["webpackChunkerecruitment"]=self["webpackChunkerecruitment"]||[]).push([[842],{8874:function(e,a,l){l.r(a),l.d(a,{default:function(){return f}});var o=l(3396),n=l(7139);const t=(0,o._)("span",null,"Clients",-1),s={class:"dialog-footer"},r=(0,o._)("i",{class:"fas fa-cloud el-icon--upload"},null,-1),i=(0,o._)("div",{class:"el-upload__text"},[(0,o.Uk)(" Drop or click here to"),(0,o._)("em",null," upload company logo")],-1),d={class:"dialog-footer"},m={style:{display:"flex","align-items":"center"}},u={style:{"margin-left":"10px"}},p={class:"text-black"},c=(0,o._)("br",null,null,-1),h=(0,o._)("span",{class:"el-dropdown-link"},[(0,o._)("i",{class:"fas fa-ellipsis-v"})],-1);function _(e,a,l,_,g,y){const b=(0,o.up)("el-button"),w=(0,o.up)("el-input"),f=(0,o.up)("el-form-item"),W=(0,o.up)("el-col"),k=(0,o.up)("el-date-picker"),C=(0,o.up)("el-option"),V=(0,o.up)("el-select"),U=(0,o.up)("el-row"),$=(0,o.up)("el-form"),v=(0,o.up)("el-dialog"),E=(0,o.up)("el-upload"),S=(0,o.up)("el-progress"),z=(0,o.up)("el-avatar"),N=(0,o.up)("router-link"),q=(0,o.up)("el-table-column"),x=(0,o.up)("el-dropdown-item"),B=(0,o.up)("el-dropdown-menu"),j=(0,o.up)("el-dropdown"),D=(0,o.up)("el-table"),I=(0,o.up)("el-card"),A=(0,o.Q2)("loading");return(0,o.wg)(),(0,o.j4)(I,null,{header:(0,o.w5)((()=>[t,(0,o.Wm)(b,{type:"primary",plain:"",onClick:a[0]||(a[0]=e=>g.dialog=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("Add New Client")])),_:1})])),default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:g.dialog,"onUpdate:modelValue":a[13]||(a[13]=e=>g.dialog=e),title:"Add Client","before-close":y.handleClose},{footer:(0,o.w5)((()=>[(0,o._)("span",s,[(0,o.Wm)(b,{onClick:y.handleClose},{default:(0,o.w5)((()=>[(0,o.Uk)("Cancel")])),_:1},8,["onClick"]),(0,o.Wm)(b,{type:"primary",plain:"",onClick:a[12]||(a[12]=e=>y.submit("company_branch")),loading:g.loading},{default:(0,o.w5)((()=>[(0,o.Uk)("Save")])),_:1},8,["loading"])])])),default:(0,o.w5)((()=>[(0,o.Wm)($,{model:g.company_branch,size:"large",ref:"company_branch","label-position":"top",inline:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Business Name",prop:"company_name",rules:[{required:!0,message:"Business name is required",trigger:["blur","change"]}]},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:g.company_branch.company_name,"onUpdate:modelValue":a[1]||(a[1]=e=>g.company_branch.company_name=e),placeholder:"Enter business name"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Registration Number",prop:"business_regno",rules:[{required:!0,message:"Registration number is required",trigger:["blur","change"]}]},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:g.company_branch.business_regno,"onUpdate:modelValue":a[2]||(a[2]=e=>g.company_branch.business_regno=e),placeholder:"Enter registration number"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Incorporation Date"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:g.company_branch.incorporation_date,"onUpdate:modelValue":a[3]||(a[3]=e=>g.company_branch.incorporation_date=e),type:"date",placeholder:"Date of Incorporation",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"KRA PIN"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:g.company_branch.kra_pin,"onUpdate:modelValue":a[4]||(a[4]=e=>g.company_branch.kra_pin=e),placeholder:"Enter kra pin"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"NHIF Number"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:g.company_branch.nhif_number,"onUpdate:modelValue":a[5]||(a[5]=e=>g.company_branch.nhif_number=e),placeholder:"Enter NHIF number"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"NSSF Number"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:g.company_branch.nssf_number,"onUpdate:modelValue":a[6]||(a[6]=e=>g.company_branch.nssf_number=e),placeholder:"Enter NSSF number"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Phone Number",prop:"phone",rules:[{required:!0,message:"Phone number is required",trigger:["blur","change"]}]},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:g.company_branch.phone,"onUpdate:modelValue":a[7]||(a[7]=e=>g.company_branch.phone=e),placeholder:"Enter phone number"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{span:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Email Address",prop:"email",rules:[{required:!0,message:"Email address is required",trigger:["blur","change"]},{type:"email",message:"Please enter valid address",trigger:["blur","change"]}]},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:g.company_branch.email,"onUpdate:modelValue":a[8]||(a[8]=e=>g.company_branch.email=e),placeholder:"Enter email address"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Industry"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{modelValue:g.company_branch.industry,"onUpdate:modelValue":a[9]||(a[9]=e=>g.company_branch.industry=e),placeholder:"Select industry",filterable:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.dictionary.industries,(e=>((0,o.wg)(),(0,o.j4)(C,{value:e.industry,key:e.industry,label:e.industry},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Number of Employees"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{modelValue:g.company_branch.company_size,"onUpdate:modelValue":a[10]||(a[10]=e=>g.company_branch.company_size=e),placeholder:"Select company size",filterable:""},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(["1 - 5","5 - 10","10 - 20","20 - 100","100 +"],(e=>(0,o.Wm)(C,{value:e,key:e,label:e},null,8,["value","label"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(W,{span:24},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"Country",prop:"country",rules:[{required:!0,message:"Country is required",trigger:["blur","change"]}]},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{modelValue:g.company_branch.country,"onUpdate:modelValue":a[11]||(a[11]=e=>g.company_branch.country=e),filterable:"",placeholder:"Select country"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.dictionary.countries,(e=>((0,o.wg)(),(0,o.j4)(C,{key:e,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"]),(0,o.Wm)(v,{modelValue:g.upload_dialog,"onUpdate:modelValue":a[14]||(a[14]=e=>g.upload_dialog=e),title:"Upload Receipt","before-close":y.handleClose},{footer:(0,o.w5)((()=>[(0,o._)("span",d,[(0,o.Wm)(b,{onClick:y.handleClose},{default:(0,o.w5)((()=>[(0,o.Uk)("Cancel")])),_:1},8,["onClick"])])])),default:(0,o.w5)((()=>[(0,o.Wm)($,{model:g.company_branch,size:"large",ref:"company_branch","label-position":"top",inline:"","status-icon":""},{default:(0,o.w5)((()=>[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,{xs:24,sm:24,md:24,lg:24,xl:24},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{label:"",prop:"company_logo"},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{accept:"image/*","auto-upload":!1,"on-change":y.uploadLogo,drag:""},{default:(0,o.w5)((()=>[r,i])),_:1},8,["on-change"]),g.loading?((0,o.wg)(),(0,o.j4)(S,{key:0,percentage:50,status:"warning",indeterminate:!0})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","before-close"]),(0,o.wy)(((0,o.wg)(),(0,o.j4)(D,{ref:"tableRef",data:y.company_branches},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{prop:"company_name",label:"Client",width:"250"},{default:(0,o.w5)((l=>[(0,o.Wm)(N,{to:"#",onClick:a[15]||(a[15]=e=>g.dialog=!0)},{default:(0,o.w5)((()=>[(0,o._)("div",m,[l.row.company_logo?((0,o.wg)(),(0,o.j4)(z,{key:0,src:l.row.company_logo},null,8,["src"])):((0,o.wg)(),(0,o.j4)(z,{key:1},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.$helpers.getInitials(l.row.company_name)),1)])),_:2},1024)),(0,o._)("span",u,[(0,o._)("span",p,[(0,o.Uk)((0,n.zw)(l.row.company_name),1),c]),(0,o.Uk)((0,n.zw)(l.row.merchant_code),1)])])])),_:2},1024)])),_:1}),(0,o.Wm)(q,{prop:"jobs",label:"Jobs"},{default:(0,o.w5)((e=>[(0,o.Wm)(N,{to:"/applications"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.jobs),1)])),_:2},1024)])),_:1}),(0,o.Wm)(q,{prop:"applications",label:"Applications"},{default:(0,o.w5)((e=>[(0,o.Wm)(N,{to:"/applications"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.applications),1)])),_:2},1024)])),_:1}),(0,o.Wm)(q,{prop:"hired",label:"Hired"},{default:(0,o.w5)((e=>[(0,o.Wm)(N,{to:"/employees"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.hired),1)])),_:2},1024)])),_:1}),(0,o.Wm)(q,{prop:"action",label:"Action",width:"70"},{default:(0,o.w5)((e=>[(0,o.Wm)(j,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(B,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,{onClick:a=>y.edit(e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("Edit")])),_:2},1032,["onClick"]),(0,o.Wm)(x,{onClick:a=>y.deleteCompanyBranch(e.row.id)},{default:(0,o.w5)((()=>[(0,o.Uk)("Delete")])),_:2},1032,["onClick"]),(0,o.Wm)(x,{onClick:a=>(g.company_branch=e.row,g.upload_dialog=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.row.receipt?"Change Logo":"Upload Logo"),1)])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,o.w5)((()=>[h])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[A,g.loading]])])),_:1})}var g=l(9775),y={data(){return{dialog:!1,upload_dialog:!1,loading:!1,company_branch:{},file:""}},computed:{company_branches(){if(this.loading=!0,void 0!=this.$store.state.company.company_branches)return this.loading=!1,this.$store.state.company.company_branches}},mounted(){this.$store.dispatch("dictionary/getCountries"),this.$store.dispatch("dictionary/getIndustries"),this.$store.dispatch("company/getCompanyBranches")},methods:{edit(e){this.company_branch=e,this.dialog=!0},submit(e){this.$refs[e].validate((e=>{if(!e)return!1;this.loading=!0,this.$store.dispatch("company/saveCompanyBranch",this.company_branch).then((e=>{this.company_branch={},this.$store.dispatch("company/getCompanyBranches"),this.dialog=!1,this.loading=!1,this.$notify({title:"Success",message:e.data.message,type:"success"})}),(e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$notify({title:"Error",message:this.message,type:"error"})}))}))},deleteCompanyBranch(e){confirm("Do you really want to delete this record?")&&this.$store.dispatch("company/deleteCompanyBranch",e).then((e=>{this.$store.dispatch("company/getCompanyBranches"),this.$notify({title:"Success",message:e.data.message,type:"success"})})).catch((e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$notify({title:"Error",message:this.message,type:"error"})}))},uploadLogo(e){this.loading=!0,this.file=e.raw;let a=new FormData;a.append("file",this.file),g.Z.uploadLogo(this.company_branch.id,a).then((e=>{this.$store.dispatch("company/getCompanyBranches"),this.loading=!1,this.upload_dialog=!1,this.$notify({title:"Success",message:e.data.message,type:"success"})}),(e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$notify({title:"Error",message:this.message,type:"error"})}))},handleClose(){this.dialog=!1,this.upload_dialog=!1,this.$nextTick((()=>{this.company_branch={},this.$store.dispatch("company/getCompanyBranches")}))}}},b=l(89);const w=(0,b.Z)(y,[["render",_]]);var f=w}}]);
//# sourceMappingURL=842.18efad0d.js.map