"use strict";(self["webpackChunkerecruitment"]=self["webpackChunkerecruitment"]||[]).push([[557],{6557:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var l=a(3396);const n=(0,l._)("span",null,"Departments",-1),d={class:"dialog-footer"},o=(0,l._)("span",{class:"el-dropdown-link"},[(0,l._)("i",{class:"fas fa-ellipsis-v"})],-1);function s(e,t,a,s,r,i){const p=(0,l.up)("el-button"),m=(0,l.up)("el-input"),u=(0,l.up)("el-form-item"),c=(0,l.up)("el-col"),g=(0,l.up)("el-option"),h=(0,l.up)("el-select"),f=(0,l.up)("el-row"),w=(0,l.up)("el-form"),y=(0,l.up)("el-dialog"),_=(0,l.up)("el-table-column"),W=(0,l.up)("el-dropdown-item"),b=(0,l.up)("el-dropdown-menu"),k=(0,l.up)("el-dropdown"),D=(0,l.up)("el-table"),$=(0,l.up)("el-pagination"),v=(0,l.up)("el-card"),C=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.j4)(v,null,{header:(0,l.w5)((()=>[n,(0,l.Wm)(p,{type:"primary",plain:"",onClick:t[0]||(t[0]=e=>r.dialog=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("Add New Department")])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:r.dialog,"onUpdate:modelValue":t[5]||(t[5]=e=>r.dialog=e),title:"Add Department"},{footer:(0,l.w5)((()=>[(0,l._)("span",d,[(0,l.Wm)(p,{onClick:t[3]||(t[3]=e=>r.dialog=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("Cancel")])),_:1}),(0,l.Wm)(p,{type:"primary",plain:"",onClick:t[4]||(t[4]=e=>i.submit("department")),loading:r.loading},{default:(0,l.w5)((()=>[(0,l.Uk)("Save")])),_:1},8,["loading"])])])),default:(0,l.w5)((()=>[(0,l.Wm)(w,{model:r.department,size:"large",ref:"department","label-position":"top",inline:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{span:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"Department",prop:"department",rules:[{required:!0,message:"Department is required",trigger:["blur","change"]}]},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:r.department.department,"onUpdate:modelValue":t[1]||(t[1]=e=>r.department.department=e),placeholder:"Enter department"},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(c,{span:24},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"Head of Department"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:r.department.hod,"onUpdate:modelValue":t[2]||(t[2]=e=>r.department.hod=e),placeholder:"Enter head of department"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.$store.state.dictionary.employees,(e=>((0,l.wg)(),(0,l.j4)(g,{key:e,label:e.full_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(D,{ref:"tableRef",data:i.departments},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{prop:"department",label:"Department"}),(0,l.Wm)(_,{prop:"hod_name",label:"Head of Department"}),(0,l.Wm)(_,{prop:"employee_count",label:"No. of Employees"}),(0,l.Wm)(_,{prop:"action",label:"Action",width:"70"},{default:(0,l.w5)((e=>[(0,l.Wm)(k,null,{dropdown:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W,{onClick:t=>i.edit(e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("Edit")])),_:2},1032,["onClick"]),(0,l.Wm)(W,{onClick:t=>i.deleteDepartment(e.row.id)},{default:(0,l.w5)((()=>[(0,l.Uk)("Delete")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,l.w5)((()=>[o])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[C,r.loading]]),(0,l.Wm)($,{background:"",layout:"prev, pager, next",total:i.departments?i.departments.length:0},null,8,["total"])])),_:1})}var r={data(){return{dialog:!1,loading:!1,department:{}}},mounted(){this.$store.dispatch("dictionary/getDepartments")},computed:{departments(){if(this.loading=!0,void 0!=this.$store.state.dictionary.departments)return this.loading=!1,this.$store.state.dictionary.departments}},methods:{edit(e){this.department=e,this.dialog=!0},submit(e){this.$refs[e].validate((e=>{if(!e)return!1;this.loading=!0,this.department.company_id=this.$store.state.auth.user.company_id,this.$endpoint.saveDepartment(this.department).then((e=>{this.loading=!1,this.department={},this.$store.dispatch("dictionary/getDepartments"),this.dialog=!1,this.$notify({title:"Success",message:e.data.message,type:"success"})}),(e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$notify({title:"Error",message:this.message,type:"error"})}))}))},deleteDepartment(e){confirm("Do you really want to delete this department?")&&this.$endpoint.deleteDepartment(e).then((e=>{this.$store.dispatch("dictionary/getDepartments"),this.$notify({title:"Success",message:e.data.message,type:"success"})}),(e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.$notify({title:"Error",message:this.message,type:"error"})}))}}},i=a(89);const p=(0,i.Z)(r,[["render",s]]);var m=p}}]);
//# sourceMappingURL=557.86c460dd.js.map